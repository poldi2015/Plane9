name: Makefile CI

on:
  push:
    branches: [ "master" ]
  pull_request:
    branches: [ "master" ]

jobs:
  build_latex:
    runs-on: ubuntu-latest
    
    steps:
      - uses: actions/checkout@v3
        with:
          name: Checkout
      
      - uses: xu-cheng/texlive-action/small@v1        
        with:
          name: Build pdfs
          run: |
            apk add make
            apt add latexmk
            apt add texlive-latex-recommended
            apt add texlive-fonts-recommended
            apt add texlive-latex-extra
            apt add texlive-lang-german
            apt add texlive-lang-chinese
            apt add texlive-lang-cjk
            make

      - uses: actions/upload-artifact@v3
        with:
          name: Release pdfs and logs
          path: |
            Plane9.pdf
            Players.pdf
            Plane9.log
            Players.log
