%% Copyright 2019 Bernd Haberstumpf
%% License: CC BY-NC

\RequirePackage[T1]{fontenc}
\usepackage{fontspec}

\renewcommand{\sfdefault}{lmss}                                     % Default font light sans serif

%
% Font mappings
%

% Footer
\newcommand{\@fontFoot}{\normalfont\scshape}                        % Footer title
\newcommand{\@fontPgNumFoot}{\normalfont}                           % Psge Number in footer

% Chapter, Section Titles
\newcommand{\@fontChapter}{\expaniva\huge}                          % Chapter title
\newcommand{\@fontSection}{\expaniva\huge}                          % Section title
\newcommand{\@fontSubsection}{\expaniva\Large}                      % Subsection title

% ToC
\newcommand{\@fontTocPart}{\fontfamily{phv}\fontsize{14pt}{16pt}\selectfont\bfseries}
\newcommand{\@fontTocChapter}{\fontfamily{phv}\fontsize{11pt}{12pt}\selectfont\bfseries}
\newcommand{\@fontTocSection}{\fontfamily{phv}\fontsize{11pt}{12pt}\selectfont}
\newcommand{\@fontTocSubSection}{\fontfamily{phv}\fontsize{11pt}{12pt}\selectfont}

% Font for remark boxes
\newcommand{\@fontRemark}{\fontfamily{lmtt}\selectfont}             % Remark text

% Fonts for NSC Sheets
\newcommand{\@fontNscSheetTitle}{\expaniva\Large}                   % NSC Character title
\newcommand{\@fontNscSheet}{\fontfamily{cmss}\small\selectfont}     % NSC context text
\newcommand{\@fontNscStats}{\fontfamily{cmss}\small\selectfont}     % NSC Attributes
\newcommand{\@fontNscItems}{\fontfamily{cmss}\small\selectfont}     % NSC Inventory titles

\newcommand{\@fontBackCover}{\fontfamily{cmss}\Large\selectfont}    % Font for the backcover

%
% Font definitions
%

\newfontfamily\expaniva[
    Path = lib/fonts/,
    Extension = .otf,
    UprightFont = *,
    BoldFont = *-bold,
    ItalicFont = *-italic,
    BoldItalicFont = *-bold-italic,    
]{Expansiva}

%
% Misc
%

% StrokeColor, FillColor, StrokeWidth, Text
\newcommand*{\fillstroke}[4]{%
    % this is black magic
    % ref: http://tex.stackexchange.com/a/225639/125447
    % Tr: rendering mode (0=Fill, 1=Stroke, 2=FillThenStroke)
    % w: stroke width
    \special{pdf:bcolor #1 #2}%
    \special{pdf:literal direct #3 w 2 Tr}%
    #4%
    % ref: http://project.ktug.org/dvipdfmx/doc/tug2005.pdf
    \special{pdf:ecolor}%
    \special{pdf:literal direct 0 Tr}%
}
